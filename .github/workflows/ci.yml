# .github/workflows/ci.yml
name: Python Project CI  # 工作流名称，可自定义

# 触发条件：当 push 或 Pull Request 到 main 分支时触发
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-test:
    runs-on: ubuntu-latest  # 在 Ubuntu 最新环境中运行任务

    steps:
      # 第一步：检出代码库
      - name: Checkout repository
        uses: actions/checkout@v4

      # 第二步：设置 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'  # 指定 Python 版本，可改为你的版本

      # 第三步：安装依赖
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt  # 如果你有 requirements.txt
          pip install pytest pytest-cov   # 安装测试框架和覆盖率插件

      # 第四步：运行单元测试
      - name: Run tests with pytest
        run: |
          pytest --cov=user --cov=product  # 运行测试并统计覆盖率

